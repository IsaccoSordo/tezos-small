<div class="page-container">
  <div class="page-header">
    <h1><i class="pi pi-th-large"></i> Tezos Blocks</h1>
    <p class="subtitle">Explore the latest blocks on the Tezos blockchain</p>
  </div>

  @if (blocks(); as blocks) {
    <app-table
      [headers]="['Hash', 'Level', 'Transactions', 'Proposer', 'Timestamp']"
      [show]="blocks.length > 0"
      [count]="count() || 100"
      [paginator]="true"
      (refresh)="refreshView($event)"
    >
      @for (block of blocks; track block.hash) {
        <tr class="data-row">
          <td>
            <a [routerLink]="['/details', block.level]" class="hash-link">
              <i
                class="pi pi-link"
                style="font-size: 0.8rem; margin-right: 0.3rem"
              ></i>
              {{ block.hash }}
            </a>
          </td>
          <td>
            <span class="badge level-badge">{{ block.level }}</span>
          </td>
          <td>
            <span class="transaction-count">
              <i
                class="pi pi-exchange"
                style="font-size: 0.9rem; margin-right: 0.3rem"
              ></i>
              {{ block.transactions }}
            </span>
          </td>
          <td>{{ block.proposer?.alias ?? "\<none>" }}</td>
          <td class="timestamp">
            {{ block.timestamp | date: "dd.MM.yyyy HH:mm" }}
          </td>
        </tr>
      }
    </app-table>
  }
</div>
